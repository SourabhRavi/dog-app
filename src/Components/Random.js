import React, { useState } from "react";
import "../styles/Random.css";
import FindDogCard from "../Components/FindDogCard";

function Random() {
  document.body.style.backgroundColor = "#18A168";
  document.body.style.backgroundImage = "none";

  const [dogImg, setDogImg] = useState(false);
  const [dogName, setDogName] = useState(false);

  function getRandom() {
    setDogImg(false);
    setDogName(false);
    const url = "https://dog.ceo/api/breeds/image/random";
    fetch(url)
      .then((res) => res.json())
      .then((data) => {
        setDogImg(data.message);
        setDogName(slug(data.message)[1].split("-").join(" "));
      })
      .catch((err) => console.log(err));
  }

  const slug = (url) => new URL(url).pathname.match(/[^/]+/g);

  return (
    <>
      <div id="main-content" className="container">
        <div className="heading-wrap">
          <p className="heading">Find me a Dog!</p>
          <svg
            width="135"
            height="90"
            viewBox="0 0 135 90"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M35.2829 50.4993C37.474 49.027 40.2061 47.46 42.9049 48.4846C44.6437 48.962 46.3536 49.6068 48.1609 49.7798C50.5932 49.1853 53.1668 48.7686 55.6539 49.2094C59.1366 50.1849 61.4726 53.8521 61.4115 57.3779C60.9789 60.9003 58.893 64.26 55.6648 65.8559C53.6799 66.9678 51.1372 67.4177 49.8498 69.4834C48.6097 71.3368 47.6073 73.4428 45.7044 74.7361C44.0049 76.0934 41.8325 76.5545 39.7489 76.9319C37.2402 77.2792 34.6208 76.2669 33.0791 74.2431C30.6056 71.341 30.7308 67.0733 32.0983 63.7007C32.7108 62.2952 33.3382 60.8011 32.8695 59.2449C32.4665 57.3319 31.6903 55.1601 32.8926 53.3613C33.508 52.2725 34.3502 51.3263 35.2829 50.4993Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M14.7568 61.4048C13.9052 59.5484 13.9298 57.136 15.358 55.5641C16.3764 54.4373 17.8094 53.7141 19.2791 53.3918C22.163 53.0421 25.0036 54.1965 27.3762 55.745C28.5263 56.4721 29.6375 57.351 30.2628 58.5902C31.0658 59.9986 31.0645 61.7751 30.3377 63.2138C29.624 65.3517 27.5752 66.8982 25.3507 67.1322C24.0467 67.2937 22.6936 67.206 21.4745 66.6878C18.7791 65.6846 16.1212 64.0264 14.7568 61.4048Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M19.1523 38.5868C19.1523 38.5868 21.6084 36.5109 25.6268 38.4793C25.6268 38.4793 28.289 39.7082 30.6264 43.0933C30.6264 43.0933 33.254 46.2663 32.4821 49.1373C32.4821 49.1373 31.9172 53.6069 26.3568 53.0013C26.3568 53.0013 22.4637 52.5637 19.4342 49.8286C19.4342 49.8286 16.2734 47.0249 16.613 43.4366C16.613 43.4366 16.948 40.4473 19.1523 38.5868Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M31.5671 28.7841C31.5671 28.7841 35.3327 27.0996 37.9437 30.8105C37.9437 30.8105 40.4732 33.4213 40.9879 37.3296C40.9879 37.3296 41.9829 41.8416 40.0703 44.0578C40.0703 44.0578 38.2855 46.8897 33.3399 44.6708C33.3399 44.6708 28.4672 41.5198 27.9803 37.008C27.9803 37.008 26.6428 30.8416 31.5671 28.7841Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M45.4861 31.5316C47.2655 30.7552 49.4282 31.2661 50.7936 32.608C52.044 33.7937 52.8555 35.3667 53.4596 36.9611C54.2705 39.3541 54.3168 42.0131 53.562 44.4266C52.9057 46.1501 51.1281 47.178 49.3585 47.3895C48.7092 47.5632 48.071 47.3857 47.4832 47.1004C45.458 46.2515 43.8003 44.5272 43.1686 42.4092C42.5079 40.4709 41.9546 38.3892 42.2987 36.3315C42.5042 34.7069 43.1236 32.9935 44.5261 32.0256C44.8226 31.8198 45.1466 31.6541 45.4861 31.5316Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M95.5934 35.0961C97.7846 33.6238 100.517 32.0568 103.215 33.0814C104.954 33.5588 106.664 34.2036 108.471 34.3766C110.904 33.7821 113.477 33.3654 115.964 33.8062C119.447 34.7817 121.783 38.4489 121.722 41.9747C121.289 45.4971 119.204 48.8568 115.975 50.4527C113.99 51.5646 111.448 52.0145 110.16 54.0802C108.92 55.9336 107.918 58.0396 106.015 59.3329C104.315 60.6902 102.143 61.1513 100.059 61.5287C97.5507 61.876 94.9314 60.8637 93.3897 58.8398C90.9162 55.9378 91.0414 51.6701 92.4088 48.2974C93.0214 46.892 93.6487 45.3979 93.1801 43.8417C92.777 41.9287 92.0009 39.7568 93.2032 37.9581C93.8185 36.8692 94.6608 35.9231 95.5934 35.0961Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M75.0673 46.0016C74.2158 44.1452 74.2404 41.7328 75.6686 40.1609C76.687 39.034 78.1199 38.3109 79.5896 37.9886C82.4735 37.6389 85.3141 38.7933 87.6867 40.3418C88.8369 41.0689 89.9481 41.9477 90.5734 43.187C91.3763 44.5954 91.375 46.3719 90.6482 47.8106C89.9345 49.9485 87.8857 51.495 85.6612 51.729C84.3572 51.8905 83.0041 51.8028 81.7851 51.2846C79.0896 50.2814 76.4318 48.6232 75.0673 46.0016Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M79.4629 23.1836C79.4629 23.1836 81.9189 21.1077 85.9374 23.0761C85.9374 23.0761 88.5995 24.305 90.9369 27.6901C90.9369 27.6901 93.5645 30.8631 92.7926 33.7341C92.7926 33.7341 92.2278 38.2037 86.6674 37.5981C86.6674 37.5981 82.7742 37.1605 79.7448 34.4254C79.7448 34.4254 76.584 31.6217 76.9235 28.0334C76.9235 28.0334 77.2585 25.0441 79.4629 23.1836Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M91.8777 13.3809C91.8777 13.3809 95.6433 11.6964 98.2542 15.4073C98.2542 15.4073 100.784 18.0181 101.298 21.9264C101.298 21.9264 102.293 26.4384 100.381 28.6546C100.381 28.6546 98.596 31.4865 93.6504 29.2676C93.6504 29.2676 88.7778 26.1166 88.2908 21.6048C88.2908 21.6048 86.9534 15.4384 91.8777 13.3809Z"
              fill="#18A168"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M105.797 16.1284C107.576 15.352 109.739 15.8629 111.104 17.2048C112.355 18.3905 113.166 19.9635 113.77 21.5579C114.581 23.9509 114.627 26.6099 113.873 29.0234C113.216 30.7469 111.439 31.7748 109.669 31.9863C109.02 32.16 108.382 31.9825 107.794 31.6972C105.769 30.8483 104.111 29.124 103.479 27.006C102.818 25.0677 102.265 22.986 102.609 20.9283C102.815 19.3037 103.434 17.5903 104.837 16.6224C105.133 16.4166 105.457 16.2509 105.797 16.1284Z"
              fill="#18A168"
            />
          </svg>
        </div>
        <button
          onClick={getRandom}
          className="btn btn-black"
          type="submit"
          style={{ marginBottom: "30px" }}
        >
          {dogName === false ? "Find One" : "Find Another"}
        </button>
        <div className="find-item">
          <FindDogCard name={dogName} img={dogImg} />
        </div>
      </div>
    </>
  );
}

export default Random;
